# 方法：
- 資料：限於僅交易現貨的客戶(有進行期貨及複委託交易者皆被排除)  
- 靜止戶定義：最後交易日起360個日曆日皆無交易行為
- 變數選擇：過去120天庫存資料、過去120天交易資料(買賣總額，並無細到交易哪些股票)、性別、年齡
- 訓練資料：
  * 範圍：201507~201902 (2014以前資料不全)
  * 由於資料嚴重不平衡(活躍戶資料過多)，因此保留所有靜止戶資料後，對活躍戶資料進行隨機抽樣，抽取與靜止戶數量相當之資料進行訓練
- 模型：
  * Gogle AutoML
  * CNN：將庫存及交易總額進行Data Binning(依據其百分位數進行切分，分至不同類別)後，轉成Binning數X120天的矩陣，將其視為圖片放到CNN2D中進行預測
  
# 建模結果
- 資料攤平後餵入google automl (轉成類別資料與原始數值資料)：分類準確度>85%
- CNN：分類準確度達82~84%
- Google AutoML顯示，庫存資料為最重要之變數

# 檢證與問題分析
- 再檢證：重新從未曾抽樣過的活躍戶中進行隨機抽樣三萬筆, 搭配原本測試資料中500筆的靜止戶資料進行模型檢證
- 發現模型對於靜止戶的recall能力雖然強, 但精確度不高：模型雖然能抓出大部分高風險靜止戶，但可能會抓出太多False Positive導致要實際進行客戶留存時有些困難
- 模型無法成功辨識的靜止戶多為靜止前120天仍相當高頻且交易量相當大的客戶，然而這些人才是我們最希望辨識並留存的對象。
- 原因檢討：
  * 訓練樣本中活躍戶與靜止戶的分布即有所不同，特別是在交易頻率及交易量的部分，模型整體能學習到巨大差異的部分，但對於較為接近的資料沒辦法進行判別
  * false negative的交易量與交易次數分配與活躍戶非常接近，false positive則與靜止戶接近
- 可能修正方法：
  * 重新進行訓練樣本抽樣，此次抽樣改採分層抽樣，使抽出的活躍戶樣本過去120天的總交易天數與交易量分布盡可能近似於靜止戶
  * 將False negative與活躍戶資料搭配進行第二階段模型訓練：初步實驗結果不夠好(70%左右，考慮第一階段也有誤差，實際環境下運作誤差會更大)
  * 依據用戶過去一年或120天的交易天數及交易量分層，分別訓練不同模型進行區辨
  * 由於靜止與活躍戶的庫存分布差異較小，其動態變化或許是分別的主要關鍵
- 後續應用：可以參考Marketing中關於lift-modeling的文獻，即是利用模型預測出的靜止機率和其他可能相關的變數設計A/B test，進行客戶留存的實驗，看哪些人最易留存成功且留存成功後的價值最高，並用此實驗結果建立模型以供後續留存活動的優先排序使用。






